/linked_list.kt:(249,255): info: Generated Viper text for getVal:
field root_data: Ref

field root_next: Ref

predicate Link_shared(this$dispatch: Ref) {
  acc(this$dispatch.root_next, wildcard) &&
  (this$dispatch.root_next != df_nullValue() ==>
  acc(Link_shared(this$dispatch.root_next), wildcard)) &&
  df_isSubtype(df_typeOf(this$dispatch.root_next), df_nullable(df_c_root_Link()))
}

predicate Link_unique(this$dispatch: Ref) {
  acc(this$dispatch.root_data, write) &&
  df_isSubtype(df_typeOf(this$dispatch.root_data), df_intType()) &&
  acc(this$dispatch.root_next, wildcard) &&
  (this$dispatch.root_next != df_nullValue() ==>
  acc(Link_shared(this$dispatch.root_next), wildcard)) &&
  (this$dispatch.root_next != df_nullValue() ==>
  acc(Link_unique(this$dispatch.root_next), write)) &&
  df_isSubtype(df_typeOf(this$dispatch.root_next), df_nullable(df_c_root_Link()))
}

method root_getVal(l: Ref) returns (ret_0: Ref)
  requires acc(Link_unique(l), write)
  ensures df_isSubtype(df_typeOf(ret_0), df_nullable(df_intType()))
{
  var anon_0: Ref
  inhale df_isSubtype(df_typeOf(l), df_c_root_Link())
  inhale acc(Link_shared(l), wildcard)
  unfold acc(Link_shared(l), wildcard)
  anon_0 := l.root_next
  if (anon_0 != df_nullValue()) {
    var anon_1: Ref
    inhale acc(anon_0.root_data, write)
    anon_1 := anon_0.root_data
    exhale acc(anon_0.root_data, write)
    inhale df_isSubtype(df_typeOf(anon_1), df_intType())
    ret_0 := anon_1
  } else {
    ret_0 := df_nullValue()}
  goto lbl_0
  label lbl_0
}

/linked_list.kt:(430,434): info: Generated Viper text for test:
field root_data: Ref

field root_next: Ref

field root_size: Ref

predicate c_BooleanArray_shared(this$dispatch: Ref) {
  acc(this$dispatch.root_size, wildcard) &&
  df_isSubtype(df_typeOf(this$dispatch.root_size), df_intType()) &&
  acc(c_Cloneable_shared(this$dispatch), wildcard) &&
  acc(c_Serializable_shared(this$dispatch), wildcard)
}

predicate c_BooleanArray_unique(this$dispatch: Ref) {
  acc(this$dispatch.root_size, wildcard) &&
  df_isSubtype(df_typeOf(this$dispatch.root_size), df_intType()) &&
  acc(c_Cloneable_unique(this$dispatch), write) &&
  acc(c_Serializable_unique(this$dispatch), write)
}

predicate c_Cloneable_shared(this$dispatch: Ref) {
  true
}

predicate c_Cloneable_unique(this$dispatch: Ref) {
  true
}

predicate c_Link_shared(this$dispatch: Ref) {
  acc(this$dispatch.root_next, wildcard) &&
  (this$dispatch.root_next != df_nullValue() ==>
  acc(c_Link_shared(this$dispatch.root_next), wildcard)) &&
  df_isSubtype(df_typeOf(this$dispatch.root_next), df_nullable(df_c_root_Link()))
}

predicate c_Link_unique(this$dispatch: Ref) {
  acc(this$dispatch.root_data, write) &&
  df_isSubtype(df_typeOf(this$dispatch.root_data), df_intType()) &&
  acc(this$dispatch.root_next, wildcard) &&
  (this$dispatch.root_next != df_nullValue() ==>
  acc(c_Link_shared(this$dispatch.root_next), wildcard)) &&
  (this$dispatch.root_next != df_nullValue() ==>
  acc(c_Link_unique(this$dispatch.root_next), write)) &&
  df_isSubtype(df_typeOf(this$dispatch.root_next), df_nullable(df_c_root_Link()))
}

predicate c_Serializable_shared(this$dispatch: Ref) {
  true
}

predicate c_Serializable_unique(this$dispatch: Ref) {
  true
}

method c_Link_Int_NT_Link(data: Ref, next: Ref) returns (ret: Ref)
  requires next != df_nullValue() ==> acc(c_Link_unique(next), write)
  ensures df_isSubtype(df_typeOf(ret), df_c_root_Link())
  ensures acc(c_Link_shared(ret), wildcard)
  ensures acc(c_Link_unique(ret), write)
  ensures (unfolding acc(c_Link_shared(ret), wildcard) in ret.root_next) ==
    next


method root_test() returns (ret_0: Ref)
  ensures df_isSubtype(df_typeOf(ret_0), df_unitType())
{
  var l: Ref
  var anon_0: Ref
  var expr1: Ref
  var anon_1: Ref
  var expr2: Ref
  var anon_2: Ref
  var anon_3: Ref
  anon_0 := c_Link_Int_NT_Link(df_intToRef(3), df_nullValue())
  l := c_Link_Int_NT_Link(df_intToRef(5), anon_0)
  inhale acc(l.root_data, write)
  anon_1 := l.root_data
  exhale acc(l.root_data, write)
  inhale df_isSubtype(df_typeOf(anon_1), df_intType())
  expr1 := df_boolToRef(df_intFromRef(anon_1) == 5)
  assert df_boolFromRef(expr1)
  unfold acc(c_Link_shared(l), wildcard)
  anon_3 := l.root_next
  if (anon_3 != df_nullValue()) {
    var anon_4: Ref
    inhale acc(anon_3.root_data, write)
    anon_4 := anon_3.root_data
    exhale acc(anon_3.root_data, write)
    inhale df_isSubtype(df_typeOf(anon_4), df_intType())
    anon_2 := anon_4
  } else {
    anon_2 := df_nullValue()}
  expr2 := df_boolToRef(anon_2 == df_intToRef(3))
  assert df_boolFromRef(expr2)
  label lbl_0
  inhale df_isSubtype(df_typeOf(ret_0), df_unitType())
}

/linked_list.kt:(513,518): warning: Viper verification error: Assert might fail. Assertion df_boolFromRef(expr1) might not hold.
