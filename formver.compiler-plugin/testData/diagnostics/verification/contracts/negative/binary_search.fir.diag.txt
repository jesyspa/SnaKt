/binary_search.kt:(90,110): info: Generated Viper text for mid_increased_by_one:
field sp$size: Ref

method f$get$TF$T$List$T$Int(this$dispatch: Ref, index: Ref)
  returns (ret: Ref)
  requires acc(this$dispatch.sp$size, write)
  requires df$intFromRef(this$dispatch.sp$size) >= 0
  requires df$intFromRef(index) >= 0
  requires df$intFromRef(this$dispatch.sp$size) > df$intFromRef(index)
  ensures acc(this$dispatch.sp$size, write)
  ensures df$intFromRef(this$dispatch.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret), df$intType())
  ensures df$intFromRef(this$dispatch.sp$size) ==
    old(df$intFromRef(this$dispatch.sp$size))


method f$isEmpty$TF$T$List(this$dispatch: Ref) returns (ret: Ref)
  requires acc(this$dispatch.sp$size, write)
  requires df$intFromRef(this$dispatch.sp$size) >= 0
  ensures acc(this$dispatch.sp$size, write)
  ensures df$intFromRef(this$dispatch.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret), df$boolType())
  ensures df$intFromRef(this$dispatch.sp$size) ==
    old(df$intFromRef(this$dispatch.sp$size))
  ensures df$boolFromRef(ret) ==> df$intFromRef(this$dispatch.sp$size) == 0
  ensures !df$boolFromRef(ret) ==> df$intFromRef(this$dispatch.sp$size) > 0


method f$mid_increased_by_one$TF$T$List$T$Int(arr: Ref, target: Ref)
  returns (ret$0: Ref)
  requires acc(arr.sp$size, write)
  requires df$intFromRef(arr.sp$size) >= 0
  ensures acc(arr.sp$size, write)
  ensures df$intFromRef(arr.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret$0), df$boolType())
{
  var size: Ref
  var mid: Ref
  var anon$0: Ref
  var anon$1: Ref
  inhale df$isSubtype(df$typeOf(arr), df$c$pkg$kotlin_collections$List())
  inhale acc(p$pkg$kotlin_collections$c$List$shared(arr), wildcard)
  inhale df$isSubtype(df$typeOf(target), df$intType())
  size := arr.sp$size
  inhale df$isSubtype(df$typeOf(size), df$intType())
  anon$0 := arr.sp$size
  inhale df$isSubtype(df$typeOf(anon$0), df$intType())
  mid := sp$plusInts(sp$divInts(anon$0, df$intToRef(2)), df$intToRef(1))
  anon$1 := f$isEmpty$TF$T$List(arr)
  if (df$boolFromRef(anon$1)) {
    ret$0 := df$boolToRef(false)
  } else {
    var anon$2: Ref
    anon$2 := f$get$TF$T$List$T$Int(arr, mid)
    if (df$intFromRef(anon$2) == df$intFromRef(target)) {
      ret$0 := df$boolToRef(true)
    } else {
      var anon$3: Ref
      anon$3 := f$get$TF$T$List$T$Int(arr, mid)
      if (df$intFromRef(anon$3) < df$intFromRef(target)) {
        var anon$4: Ref
        anon$4 := f$subList$TF$T$List$T$Int$T$Int(arr, sp$plusInts(mid, df$intToRef(1)),
          size)
        ret$0 := f$mid_increased_by_one$TF$T$List$T$Int(anon$4, target)
      } else {
        var anon$5: Ref
        anon$5 := f$subList$TF$T$List$T$Int$T$Int(arr, df$intToRef(0), mid)
        ret$0 := f$mid_increased_by_one$TF$T$List$T$Int(anon$5, target)
      }
    }
  }
  goto lbl$0
  label lbl$0
}

method f$subList$TF$T$List$T$Int$T$Int(this$dispatch: Ref, fromIndex: Ref, toIndex: Ref)
  returns (ret: Ref)
  requires acc(this$dispatch.sp$size, write)
  requires df$intFromRef(this$dispatch.sp$size) >= 0
  requires df$intFromRef(fromIndex) <= df$intFromRef(toIndex)
  requires df$intFromRef(fromIndex) >= 0
  requires df$intFromRef(toIndex) <= df$intFromRef(this$dispatch.sp$size)
  ensures acc(this$dispatch.sp$size, write)
  ensures df$intFromRef(this$dispatch.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret), df$c$pkg$kotlin_collections$List())
  ensures acc(ret.sp$size, write)
  ensures df$intFromRef(ret.sp$size) >= 0
  ensures acc(p$pkg$kotlin_collections$c$List$shared(ret), wildcard)
  ensures df$intFromRef(this$dispatch.sp$size) ==
    old(df$intFromRef(this$dispatch.sp$size))
  ensures df$intFromRef(ret.sp$size) ==
    df$intFromRef(toIndex) - df$intFromRef(fromIndex)


/binary_search.kt:(305,313): warning: Invalid index for list 'arr', the index may be greater than the list's size.

/binary_search.kt:(511,531): info: Generated Viper text for mid_decreased_by_one:
field sp$size: Ref

method f$get$TF$T$List$T$Int(this$dispatch: Ref, index: Ref)
  returns (ret: Ref)
  requires acc(this$dispatch.sp$size, write)
  requires df$intFromRef(this$dispatch.sp$size) >= 0
  requires df$intFromRef(index) >= 0
  requires df$intFromRef(this$dispatch.sp$size) > df$intFromRef(index)
  ensures acc(this$dispatch.sp$size, write)
  ensures df$intFromRef(this$dispatch.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret), df$intType())
  ensures df$intFromRef(this$dispatch.sp$size) ==
    old(df$intFromRef(this$dispatch.sp$size))


method f$isEmpty$TF$T$List(this$dispatch: Ref) returns (ret: Ref)
  requires acc(this$dispatch.sp$size, write)
  requires df$intFromRef(this$dispatch.sp$size) >= 0
  ensures acc(this$dispatch.sp$size, write)
  ensures df$intFromRef(this$dispatch.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret), df$boolType())
  ensures df$intFromRef(this$dispatch.sp$size) ==
    old(df$intFromRef(this$dispatch.sp$size))
  ensures df$boolFromRef(ret) ==> df$intFromRef(this$dispatch.sp$size) == 0
  ensures !df$boolFromRef(ret) ==> df$intFromRef(this$dispatch.sp$size) > 0


method f$mid_decreased_by_one$TF$T$List$T$Int(arr: Ref, target: Ref)
  returns (ret$0: Ref)
  requires acc(arr.sp$size, write)
  requires df$intFromRef(arr.sp$size) >= 0
  ensures acc(arr.sp$size, write)
  ensures df$intFromRef(arr.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret$0), df$boolType())
{
  var size: Ref
  var mid: Ref
  var anon$0: Ref
  var anon$1: Ref
  inhale df$isSubtype(df$typeOf(arr), df$c$pkg$kotlin_collections$List())
  inhale acc(p$pkg$kotlin_collections$c$List$shared(arr), wildcard)
  inhale df$isSubtype(df$typeOf(target), df$intType())
  size := arr.sp$size
  inhale df$isSubtype(df$typeOf(size), df$intType())
  anon$0 := arr.sp$size
  inhale df$isSubtype(df$typeOf(anon$0), df$intType())
  mid := sp$minusInts(sp$divInts(anon$0, df$intToRef(2)), df$intToRef(1))
  anon$1 := f$isEmpty$TF$T$List(arr)
  if (df$boolFromRef(anon$1)) {
    ret$0 := df$boolToRef(false)
  } else {
    var anon$2: Ref
    anon$2 := f$get$TF$T$List$T$Int(arr, mid)
    if (df$intFromRef(anon$2) == df$intFromRef(target)) {
      ret$0 := df$boolToRef(true)
    } else {
      var anon$3: Ref
      anon$3 := f$get$TF$T$List$T$Int(arr, mid)
      if (df$intFromRef(anon$3) < df$intFromRef(target)) {
        var anon$4: Ref
        anon$4 := f$subList$TF$T$List$T$Int$T$Int(arr, sp$plusInts(mid, df$intToRef(1)),
          size)
        ret$0 := f$mid_decreased_by_one$TF$T$List$T$Int(anon$4, target)
      } else {
        var anon$5: Ref
        anon$5 := f$subList$TF$T$List$T$Int$T$Int(arr, df$intToRef(0), mid)
        ret$0 := f$mid_decreased_by_one$TF$T$List$T$Int(anon$5, target)
      }
    }
  }
  goto lbl$0
  label lbl$0
}

method f$subList$TF$T$List$T$Int$T$Int(this$dispatch: Ref, fromIndex: Ref, toIndex: Ref)
  returns (ret: Ref)
  requires acc(this$dispatch.sp$size, write)
  requires df$intFromRef(this$dispatch.sp$size) >= 0
  requires df$intFromRef(fromIndex) <= df$intFromRef(toIndex)
  requires df$intFromRef(fromIndex) >= 0
  requires df$intFromRef(toIndex) <= df$intFromRef(this$dispatch.sp$size)
  ensures acc(this$dispatch.sp$size, write)
  ensures df$intFromRef(this$dispatch.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret), df$c$pkg$kotlin_collections$List())
  ensures acc(ret.sp$size, write)
  ensures df$intFromRef(ret.sp$size) >= 0
  ensures acc(p$pkg$kotlin_collections$c$List$shared(ret), wildcard)
  ensures df$intFromRef(this$dispatch.sp$size) ==
    old(df$intFromRef(this$dispatch.sp$size))
  ensures df$intFromRef(ret.sp$size) ==
    df$intFromRef(toIndex) - df$intFromRef(fromIndex)


/binary_search.kt:(726,734): warning: Invalid index for list 'arr', the index may be less than zero.

/binary_search.kt:(932,964): info: Generated Viper text for mid_decreased_by_one_in_rec_call:
field sp$size: Ref

method f$get$TF$T$List$T$Int(this$dispatch: Ref, index: Ref)
  returns (ret: Ref)
  requires acc(this$dispatch.sp$size, write)
  requires df$intFromRef(this$dispatch.sp$size) >= 0
  requires df$intFromRef(index) >= 0
  requires df$intFromRef(this$dispatch.sp$size) > df$intFromRef(index)
  ensures acc(this$dispatch.sp$size, write)
  ensures df$intFromRef(this$dispatch.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret), df$intType())
  ensures df$intFromRef(this$dispatch.sp$size) ==
    old(df$intFromRef(this$dispatch.sp$size))


method f$isEmpty$TF$T$List(this$dispatch: Ref) returns (ret: Ref)
  requires acc(this$dispatch.sp$size, write)
  requires df$intFromRef(this$dispatch.sp$size) >= 0
  ensures acc(this$dispatch.sp$size, write)
  ensures df$intFromRef(this$dispatch.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret), df$boolType())
  ensures df$intFromRef(this$dispatch.sp$size) ==
    old(df$intFromRef(this$dispatch.sp$size))
  ensures df$boolFromRef(ret) ==> df$intFromRef(this$dispatch.sp$size) == 0
  ensures !df$boolFromRef(ret) ==> df$intFromRef(this$dispatch.sp$size) > 0


method f$mid_decreased_by_one_in_rec_call$TF$T$List$T$Int(arr: Ref, target: Ref)
  returns (ret$0: Ref)
  requires acc(arr.sp$size, write)
  requires df$intFromRef(arr.sp$size) >= 0
  ensures acc(arr.sp$size, write)
  ensures df$intFromRef(arr.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret$0), df$boolType())
{
  var size: Ref
  var mid: Ref
  var anon$0: Ref
  var anon$1: Ref
  inhale df$isSubtype(df$typeOf(arr), df$c$pkg$kotlin_collections$List())
  inhale acc(p$pkg$kotlin_collections$c$List$shared(arr), wildcard)
  inhale df$isSubtype(df$typeOf(target), df$intType())
  size := arr.sp$size
  inhale df$isSubtype(df$typeOf(size), df$intType())
  anon$0 := arr.sp$size
  inhale df$isSubtype(df$typeOf(anon$0), df$intType())
  mid := sp$divInts(anon$0, df$intToRef(2))
  anon$1 := f$isEmpty$TF$T$List(arr)
  if (df$boolFromRef(anon$1)) {
    ret$0 := df$boolToRef(false)
  } else {
    var anon$2: Ref
    anon$2 := f$get$TF$T$List$T$Int(arr, mid)
    if (df$intFromRef(anon$2) == df$intFromRef(target)) {
      ret$0 := df$boolToRef(true)
    } else {
      var anon$3: Ref
      anon$3 := f$get$TF$T$List$T$Int(arr, mid)
      if (df$intFromRef(anon$3) < df$intFromRef(target)) {
        var anon$4: Ref
        anon$4 := f$subList$TF$T$List$T$Int$T$Int(arr, sp$plusInts(mid, df$intToRef(1)),
          size)
        ret$0 := f$mid_decreased_by_one_in_rec_call$TF$T$List$T$Int(anon$4,
          target)
      } else {
        var anon$5: Ref
        anon$5 := f$subList$TF$T$List$T$Int$T$Int(arr, df$intToRef(0), sp$minusInts(mid,
          df$intToRef(1)))
        ret$0 := f$mid_decreased_by_one_in_rec_call$TF$T$List$T$Int(anon$5,
          target)
      }
    }
  }
  goto lbl$0
  label lbl$0
}

method f$subList$TF$T$List$T$Int$T$Int(this$dispatch: Ref, fromIndex: Ref, toIndex: Ref)
  returns (ret: Ref)
  requires acc(this$dispatch.sp$size, write)
  requires df$intFromRef(this$dispatch.sp$size) >= 0
  requires df$intFromRef(fromIndex) <= df$intFromRef(toIndex)
  requires df$intFromRef(fromIndex) >= 0
  requires df$intFromRef(toIndex) <= df$intFromRef(this$dispatch.sp$size)
  ensures acc(this$dispatch.sp$size, write)
  ensures df$intFromRef(this$dispatch.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret), df$c$pkg$kotlin_collections$List())
  ensures acc(ret.sp$size, write)
  ensures df$intFromRef(ret.sp$size) >= 0
  ensures acc(p$pkg$kotlin_collections$c$List$shared(ret), wildcard)
  ensures df$intFromRef(this$dispatch.sp$size) ==
    old(df$intFromRef(this$dispatch.sp$size))
  ensures df$intFromRef(ret.sp$size) ==
    df$intFromRef(toIndex) - df$intFromRef(fromIndex)


/binary_search.kt:(1345,1368): warning: Invalid sub-list range for list 'arr', the range may be greater than the list's size.

/binary_search.kt:(1405,1425): info: Generated Viper text for unsafe_binary_search:
field sp$size: Ref

method f$get$TF$T$List$T$Int(this$dispatch: Ref, index: Ref)
  returns (ret: Ref)
  requires acc(this$dispatch.sp$size, write)
  requires df$intFromRef(this$dispatch.sp$size) >= 0
  requires df$intFromRef(index) >= 0
  requires df$intFromRef(this$dispatch.sp$size) > df$intFromRef(index)
  ensures acc(this$dispatch.sp$size, write)
  ensures df$intFromRef(this$dispatch.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret), df$intType())
  ensures df$intFromRef(this$dispatch.sp$size) ==
    old(df$intFromRef(this$dispatch.sp$size))


method f$unsafe_binary_search$TF$T$List$T$Int$T$Int$T$Int(arr: Ref, target: Ref,
  left: Ref, right: Ref)
  returns (ret$0: Ref)
  requires acc(arr.sp$size, write)
  requires df$intFromRef(arr.sp$size) >= 0
  ensures acc(arr.sp$size, write)
  ensures df$intFromRef(arr.sp$size) >= 0
  ensures df$isSubtype(df$typeOf(ret$0), df$boolType())
{
  var mid: Ref
  var anon$0: Ref
  inhale df$isSubtype(df$typeOf(arr), df$c$pkg$kotlin_collections$List())
  inhale acc(p$pkg$kotlin_collections$c$List$shared(arr), wildcard)
  inhale df$isSubtype(df$typeOf(target), df$intType())
  inhale df$isSubtype(df$typeOf(left), df$intType())
  inhale df$isSubtype(df$typeOf(right), df$intType())
  if (df$intFromRef(left) > df$intFromRef(right)) {
    ret$0 := df$boolToRef(false)
    goto lbl$0
  }
  mid := sp$plusInts(left, sp$divInts(sp$minusInts(right, left), df$intToRef(2)))
  anon$0 := f$get$TF$T$List$T$Int(arr, mid)
  if (df$intFromRef(anon$0) == df$intFromRef(target)) {
    ret$0 := df$boolToRef(true)
  } else {
    var anon$1: Ref
    anon$1 := f$get$TF$T$List$T$Int(arr, mid)
    if (df$intFromRef(anon$1) < df$intFromRef(target)) {
      ret$0 := f$unsafe_binary_search$TF$T$List$T$Int$T$Int$T$Int(arr, target,
        sp$plusInts(mid, df$intToRef(1)), right)
    } else {
      ret$0 := f$unsafe_binary_search$TF$T$List$T$Int$T$Int$T$Int(arr, target,
        left, sp$minusInts(mid, df$intToRef(1)))}
  }
  goto lbl$0
  label lbl$0
}

/binary_search.kt:(1608,1616): warning: Invalid index for list 'arr', the index may be less than zero.
